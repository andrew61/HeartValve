
@model HeartValve.Models.MeasurementsViewModel

@if (!Request.UserAgent.ToLower().Contains("ipad"))
{
    <div class="box">
        <div class="box-col">
            <button id="ExportWeight" class='k-button k-primary'>Save Graph as PDF</button>
        </div>
    </div>
}

@(Html.Kendo().Chart()
    .Name("WeightChart")
    .Title("Weight Measurements")
    .Legend(legend => legend
        .Visible(true)
        .Position(ChartLegendPosition.Bottom)
    )
    .Tooltip(tooltip => tooltip
        .Visible(true).Shared(true)
    )
    .Series(series =>
    {
        series.Line(Model.WeightSeries).Name("").Color("Black");
    })

    .CategoryAxis(axis => axis
    .Categories(Model.ReadingDate)
    .MajorGridLines(lines => lines.Visible(false))
    )
    .ValueAxis(axis => axis.Numeric()
      .Labels(labels => labels.Format("{0:N0}"))
    //.PlotBands(bands =>
    //{
    //    bands.Add().From(Model.Thresholds.WeightMin).To(Model.Thresholds.WeightMax).Color("green").Opacity(0.5);
    //})
    )
    .ChartArea(x => x.Height(350))
    .Pdf(pdf => pdf
        .FileName("Weight Readings.pdf")
    )
)

<script type="text/javascript">
    $("#ExportWeight").click(function () {
        $("#WeightChart").getKendoChart().saveAsPDF();
    });
</script>